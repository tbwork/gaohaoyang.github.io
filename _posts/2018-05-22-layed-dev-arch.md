---
layout: post
title:  "浅谈微服务体系中的DDD领域划分和分层之道"
date:   2017-09-01 13:29:18 +0800
categories: 架构师
tags: DDD 分层设计 `Layered Architecture`
author: Tommy.Tesla
mathjax: true
---

### 摘要

本文阐述了一种将DDD领域设计和其主张的分层设计方法应用于微服务体系架构的方案实践，也是个人的最佳实践。这种方案目前在本人所在的公司运作的不错。总结来说，本文主张将一个互联网公司的服务架构分为四层：基础设施层、领域服务层、应用服务层和用户界面层（表示层）。领域服务层和应用服务层均可以采用微服务设计进行拆分，其中领域服务层将严格按照DDD定义的领域模型和模块进行设计。这种方案的确用起来得心应手，把大系统以一种科学的方式分而治之，但同时也对架构师和开发人员提出了更高的要求。

 
### 背景介绍

想写这样一篇文章很久了，可惜碍于自己能力有限，从08年写代码以来一直断断续续的思考，始终对项目代码结构设计（分包、分层）没有一个可以让自己觉得无瑕疵的答案，假设了某个设计，很快在实践中又会发现其存在着一些问题。直到2014年毕业工作后了解了DDD领域驱动设计后，才有了相对清晰的方向。实际上早在2004年，Eric Envas的《领域驱动设计：软件核心复杂性应对之道》就出版了，毕竟软件开发自计算机普及以来已经存在很长一段时间了，早期国外程序员对软件开发理论的研究也十分兴盛，如今成熟后反而研究的相对少了，基本上依葫芦画瓢即可。个人认为DDD领域驱动设计对软件设计各个环节的人员都有较高的要求,用《领域驱动设计》一书的话来说它需要一个“领域驱动团队”[1]，它要求从分析阶段，产品经理、项目经理、架构师以及开发工程师就使用统一的模型语言（Ubiquitous Language）来进行沟通，并且他们都懂一些代码、产品和建模相关的知识，事实上这在国内很难实施，国内的产品经理约等于需求整理工，对其计算机基础的要求是少之又少，在我所从事的公司里，也曾发生过产品经理直接指导开发，以至于后面双方理解的同一个词有着不同含义的情况。近年来，随着分布式的发展，传统中小型机集中式服务器已经不在流行，所以微服务体系也成为了各大互联网公司主流的选择。直观的感受下**微服务**和**DDD**两者，似乎一个是把大系统拆成小系统的，另一个则是大系统的设计方法，似乎两者天生互斥，微服务化的小系统也用不着DDD，其实并不是，DDD是针对整个复杂的软件解决方案的一种科学设计方法，微服务化也是把复杂的大系统拆分为小系统，方便维护和管理，所以两者都有一个特点——为复杂的大系统服务。下面咱们就来探讨下，如何把DDD的领域设计和其主张的分层设计应用到微服务体系架构中。需要说明的是本文主要是个人从业十几年来的一点总结，未必适合所有场景，有更好更易理解的设计方式请不吝赐教。

### 


### 参考文献
1. 领域驱动设计：软件核心复杂性应对之道。**Eric Envas**，前言部分。


* content
{:toc}